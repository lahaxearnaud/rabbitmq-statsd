{
  "name": "Rabbitmq-statsd",
  "tagline": "Amqp queue information to statsd ",
  "body": "# rabbitmq-statsd\r\n\r\n> ## Example\r\n\r\n![Alt text](https://github.com/lahaxearnaud/rabbitmq-statsd/blob/master/data/queues.png?raw=true \"Queues keys\")\r\n\r\n![Alt text](https://github.com/lahaxearnaud/rabbitmq-statsd/blob/master/data/stats.png?raw=true \"Stats keys\")\r\n\r\n> ## Configuration\r\n\r\nIn the [config.json](https://github.com/lahaxearnaud/rabbitmq-statsd/blob/master/config.json) file you will find all the application configuration\r\n\r\n```js\r\n{\r\n\t\"collectInterval\": 30000, // collect interval time in ms\r\n\t\"amqp\": {\r\n\t\t\"username\": \"AMQP_USERNAME\",\r\n\t\t\"password\": \"AMQP_PASSWORD\",\r\n\t\t\"host\": \"AMQP_HOSTNAME:15672\", // might be something like heroku.srs.rabbitmq.com/rabbitmq/foobar\r\n\t\t\"protocol\": \"HTTP_OR_HTTPS\"\r\n\t},\r\n\t\"statsd\": {\r\n\t\t\"host\": \"STATSD_HOSTNAME\",\r\n\t\t\"port\": \"8125\", // port of your statsd\r\n\t\t\"prefix\": \"STATSD_PREFIX\" // prefix for your stats ex rabbit.prod / rabbit.dev\r\n\t},\r\n\t\"logPath\": \"rabbit.log\"\r\n}\r\n```\r\n\r\n> ## Install\r\n\r\nClone the remository\r\n\r\n```sh\r\n$ git clone https://github.com/lahaxearnaud/rabbitmq-statsd\r\n```\r\n\r\n## Run with docker on arm architecture (based on armbuild/alpine)\r\n\r\nDocker images: 47MB\r\n\r\n- Build the image\r\n```sh\r\n$ make build\r\n```\r\n```\r\ndocker build -t rabbitmq-collector /home/pirate/domotique-rabbitmq-statsd\r\nSending build context to Docker daemon 2.842 MB\r\nStep 1 : FROM resin/armhf-alpine-node:slim\r\n ---> 3e890d09a3d8\r\nStep 2 : RUN npm install forever -g\r\n ---> Using cache\r\n ---> a8ee4752aca3\r\nSuccessfully built a8ee4752aca3\r\n\r\n```\r\n- Start the container\r\n```sh\r\n$ make up\r\n```\r\n```\r\ndocker rm rabbitmq-collector-container | true\r\ndocker run --name rabbitmq-collector-container -v /home/pirate/domotique-rabbitmq-statsd:/var/app -d rabbitmq-collector forever /var/app/app.js\r\n4645aa2efcc4946924be0faa8237e4163ba5a2771ef9b72d488ff4e22e79e610\r\n```\r\n\r\n- Access container logs\r\n```sh\r\n$ make tail\r\n```\r\n```\r\ndocker logs -f rabbitmq-collector-container\r\nwarn:    --minUptime not set. Defaulting to: 1000ms\r\nwarn:    --spinSleepTime not set. Your script will exit if it does not stay up for at least 1000ms\r\ninfo: Rabbit monitoring starting\r\n\r\n```\r\n\r\n- Stop the container\r\n```sh\r\n$ make down\r\n\r\ndocker kill rabbitmq-collector-container | true\r\n\r\n```\r\n\r\n- Remove the image\r\n```sh\r\n$ make rm\r\n```\r\n```\r\ndocker kill rabbitmq-collector-container | true\r\nError response from daemon: Cannot kill container rabbitmq-collector-container: Container 4645aa2efcc4946924be0faa8237e4163ba5a2771ef9b72d488ff4e22e79e610 is not running\r\ndocker rmi rabbitmq-collector\r\nUntagged: rabbitmq-collector:latest\r\n\r\n```\r\n\r\n## Run without docker with forever\r\n\r\n```sh\r\n$ forver start app.js\r\n\r\n```\r\n\r\n## Run without docker and without forever\r\n\r\n```sh\r\n$ npm run app\r\n\r\n```\r\n\r\n## Contributing\r\n\r\nPull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/lahaxearnaud/rabbitmq-statsd/issues)\r\n\r\n## Author\r\n\r\n**LAHAXE Arnaud**\r\n\r\n* [github/lahaxearnaud](https://github.com/lahaxearnaud)\r\n* [twitter/arnaud_lahaxe](http://twitter.com/arnaud_lahaxe)\r\n\r\n## License\r\n\r\nCopyright Â© 2016 [LAHAXE Arnaud]()\r\nLicensed under the MIT license.\r\n\r\n***\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}